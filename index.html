<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Make 10 - 10を作るゲーム</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>Make 10</h1>
        <p class="subtitle">4つの数字で10を作ろう！（入れ替え禁止・符号なし）</p>

        <!-- Mode Selection -->
        <div class="mode-selection">
            <button class="mode-button active" data-mode="5">5問</button>
            <button class="mode-button" data-mode="10">10問</button>
            <button class="mode-button" data-mode="15">15問</button>
        </div>

        <!-- Game Info -->
        <div class="game-info">
            <div class="info-item">
                <div class="info-label">経過時間</div>
                <div class="info-value" id="timer">00:00</div>
            </div>
            <div class="info-item">
                <div class="info-label">問題数</div>
                <div class="info-value"><span id="currentProblem">1</span>/<span id="totalProblems">5</span></div>
            </div>
            <div class="info-item">
                <div class="info-label">正解数</div>
                <div class="info-value" id="correctCount">0</div>
            </div>
        </div>

        <!-- Problem Display (now shows current expression) -->
        <div class="problem-display" id="problemDisplay">0 + 1 + 1 + 9</div>

        <!-- Input Area -->
        <div class="input-area">
            <!-- Operator Buttons Row -->
            <div class="input-row">
                <div class="row-label">演算子:</div>
                <button class="operator-button" data-index="0" id="opBtn0">+</button>
                <button class="operator-button" data-index="1" id="opBtn1">+</button>
                <button class="operator-button" data-index="2" id="opBtn2">+</button>
            </div>

            <!-- Paren Buttons Row -->
            <div class="input-row">
                <div class="row-label">括弧:</div>
                <button class="paren-button" data-number="1" id="parenBtn0">　</button>
                <button class="paren-button" data-number="2" id="parenBtn1">　</button>
                <button class="paren-button" data-number="3" id="parenBtn2">　</button>
                <button class="paren-button" data-number="4" id="parenBtn3">　</button>
            </div>
        </div>

        <!-- Result Display -->
        <div class="result-display empty" id="resultDisplay">
            記号を入力して確定してください
        </div>

        <!-- Action Buttons -->
        <div class="action-buttons">
            <button class="action-button primary" id="submitBtn">確定 (Enter)</button>
            <button class="action-button secondary" id="clearBtn">クリア</button>
            <button class="action-button danger" id="resetBtn">リセット</button>
        </div>

        <!-- History Section -->
        <div class="history-section" id="historySection" style="display: none;">
            <div class="history-title">解答履歴</div>
            <div class="history-grid" id="historyGrid"></div>
        </div>

        <!-- Keyboard Hints -->
        <div class="keyboard-hints">
            <div class="hint-line">
                <strong>キーボード操作:</strong>
            </div>
            <div class="hint-line">
                <span style="background: #f3e5f5; padding: 2px 6px; border-radius: 3px; font-weight: bold;">演算子:</span>
                <span class="hint-key">Q</span> (+), <span class="hint-key">W</span> (−), <span class="hint-key">E</span> (×), <span class="hint-key">R</span> (÷)
            </div>
            <div class="hint-line">
                <span style="background: #e8f5e9; padding: 2px 6px; border-radius: 3px; font-weight: bold;">括弧:</span>
                <span class="hint-key">1</span>, <span class="hint-key">2</span>, <span class="hint-key">3</span>, <span class="hint-key">4</span>の中から二つを同時押し
            </div>
            <div class="hint-line">
                <span class="hint-key">Backspace</span> で取り消し（Undo）
            </div>
        </div>
    </div>

    <!-- Game End Modal -->
    <div class="modal" id="gameEndModal">
        <div class="modal-content">
            <h2>クリア！</h2>
            <textarea id="modalMessage" readonly style="width: 100%; min-height: 150px; font-family: monospace; font-size: 14px; padding: 10px; border: 1px solid #ccc; border-radius: 5px; resize: vertical; margin: 10px 0;"></textarea>
            <div style="display: flex; gap: 10px; justify-content: center;">
                <button class="modal-button" id="copyButton" onclick="copyResultToClipboard()">コピー</button>
                <button class="modal-button" onclick="location.reload()">もう一度プレイ</button>
            </div>
        </div>
    </div>

    <!-- Toast notification -->
    <div id="toast" class="toast"></div>

    <!-- Flick picker overlay -->
    <div id="flickPicker" class="flick-picker" style="display: none;">
        <div class="flick-option flick-top" data-op="+">+</div>
        <div class="flick-option flick-right" data-op="÷">÷</div>
        <div class="flick-option flick-bottom" data-op="-">−</div>
        <div class="flick-option flick-left" data-op="×">×</div>
    </div>

    <!-- External JavaScript files -->
    <script src="problems.js"></script>
    <script src="game.js"></script>
